<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OSwarrior Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/navbar-shared.css">
  <link rel="stylesheet" href="css/home-user.css">
  <link rel="stylesheet" href="css/quiz.css">
  <link rel="stylesheet" href="css/profile-navbar.css">
  <link rel="stylesheet" href="css/profile-dropdown.css" />
  <link rel="stylesheet" href="css/responsive-utilities.css" />
</head>
<body class="home-user">
  <!-- Navbar -->
  <div class="navbar">
    <div class="navbar-left">
      <img src="image/os-warrior-logo.png" alt="OS Warrior" class="navbar-logo">
      <h1>Home - OSwarrior</h1>
    </div>
    <div class="navbar-right">
      <div class="profile-container" id="profile-toggle">
        <span id="username-navbar">Warrior</span>
        <img id="profile-img" class="profile-img" src="image/default-profile.png" alt="Profile"/>
      </div>
    </div>
  </div>

  <!-- Profile Dropdown - Outside navbar but positioned relative to profile -->
  <div id="profile-dropdown" class="profile-dropdown hidden">
    <a id="view-profile" href="profile.html">ğŸ‘¤ View Profile</a>
    <a id="view-achievements" href="achievement.html">ğŸ† Achievements</a>

    <!-- ğŸ§° Quick Settings Section -->
    <div class="settings-section">
      <p class="settings-title">âš™ï¸ Quick Settings</p>
      <button id="toggle-theme">ğŸŒ— Dark / Light Mode</button>
      <button id="change-avatar">ğŸ–¼ï¸ Change Avatar</button>
      <button id="edit-name">âœï¸ Edit Name</button>
    </div>

    <button id="logout-btn">ğŸšª Logout</button>
  </div>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Cyber Header Banner -->
    <div class="home-header">
      <div class="banner-decoration">
        <div class="cyber-lines"></div>
        <div class="electric-particles"></div>
        <div class="floating-icons">
          <span class="float-icon">âš”ï¸</span>
          <span class="float-icon">ğŸ›¡ï¸</span>
          <span class="float-icon">ğŸ’</span>
          <span class="float-icon">âš¡</span>
        </div>
      </div>
      
      <div class="header-content">
        <h1>âš¡ Welcome Back, <span id="username" class="warrior-name">Warrior</span>! ğŸ›¡ï¸</h1>
        <p>ğŸš€ Ready to dominate the digital battlefield and master the cyber realm? Your next victory awaits! âš”ï¸</p>
        <div class="battle-status">
          <div class="status-indicator">ğŸ”¥ CYBER READY</div>
          <div class="status-indicator">âš¡ MAXIMUM POWER</div>
          <div class="status-indicator">ğŸ¯ ACTIVE MISSION</div>
        </div>
      </div>
      
      <div class="banner-effects">
        <div class="scan-line"></div>
        <div class="pulse-ring"></div>
      </div>
    </div>

    <!-- Dashboard Grid -->
    <div class="dashboard-container">
      <div class="dashboard-header">
        <h2>ğŸ¯ Warrior Dashboard</h2>
        <p>Monitor your progress and access your missions</p>
      </div>
      
      <div class="dashboard-grid">
        <!-- XP Progress Card -->
        <div class="dashboard-card xp-card">
          <div class="card-header">
            <span class="card-icon">âš¡</span>
            <div class="level-indicator">
              <span id="player-level">Level 1</span>
            </div>
          </div>
          <h3>Power Level Progress</h3>
          <div class="xp-display">
            <div class="xp-info">
              <span id="player-name">âš¡ Cyber Warrior ğŸ‘‘</span>
              <span class="xp-text"><span id="xp-current">0</span> / <span id="xp-max">100</span> XP</span>
            </div>
            <div class="xp-bar">
              <div id="xp-progress" class="xp-fill"></div>
              <div class="xp-spark"></div>
            </div>
          </div>
          <div class="power-meter">
            <span class="power-text">ğŸ”‹ POWER CORES</span>
            <div class="power-bars">
              <div class="power-bar active"></div>
              <div class="power-bar active"></div>
              <div class="power-bar"></div>
              <div class="power-bar"></div>
              <div class="power-bar"></div>
            </div>
          </div>
        </div>

        <!-- Elite Warriors Leaderboard Card -->
        <div class="dashboard-card leaderboard-card">
          <div class="card-header">
            <span class="card-icon">ï¿½</span>
            <div class="live-indicator">
              <span class="live-dot"></span>
              <span class="live-text">LIVE</span>
            </div>
          </div>
          <h3>Elite Warriors Arena</h3>
          <div id="top3-container" class="top3-container" aria-live="polite">
            <!-- populated dynamically by js/home-user.js -->
          </div>
          <div class="arena-footer">
            <span class="arena-text">âš”ï¸ Digital Arena â€¢ Battle for Glory</span>
            <a href="leaderboard.html" class="view-all-btn">View Full Rankings â†’</a>
          </div>
        </div>

        <!-- Mission Status Card -->
        <div class="dashboard-card mission-status-card">
          <div class="card-header">
            <span class="card-icon">ï¿½</span>
            <div class="mission-counter">
              <span class="counter">3/14</span>
            </div>
          </div>
          <h3>Mission Progress</h3>
          <div class="mission-stats">
            <div class="stat-item">
              <span class="stat-label">Completed</span>
              <span class="stat-value">3 Missions</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Total XP</span>
              <span class="stat-value">1,250 XP</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Success Rate</span>
              <span class="stat-value">85%</span>
            </div>
          </div>
          <div class="mission-progress-bar">
            <div class="progress-fill" style="width: 21%"></div>
          </div>
        </div>
      </div>
    </div>

  <!-- Content -->
  <div class="content">
    <div class="content-header">
      <h2>ğŸ¯ Mission Control Center</h2>
      <p>Choose your path and embark on your cyber journey</p>
    </div>
    
    <div class="missions-grid">
      <div class="mission-card quiz cyber-card">
        <div class="card-glow"></div>
        <span class="badge-new">New</span>
        <div class="card-header">
          <span class="mission-icon">ğŸ¯</span>
          <div class="card-signal">
            <div class="signal-bar"></div>
            <div class="signal-bar"></div>
            <div class="signal-bar"></div>
          </div>
        </div>
        <h3>Cyber Quiz Arena</h3>
        <p>Test your OS knowledge in the digital battlefield with interactive challenges and climb the warrior rankings.</p>
        <div class="card-stats">
          <span class="stat">ğŸ“Š 14 Mission Weeks</span>
          <span class="stat">ğŸ† Max 500 XP</span>
        </div>
        <div class="mission-progress">
          <div class="progress-bar">
            <div class="progress-fill" style="width: 25%"></div>
          </div>
          <span class="progress-text">3/14 Completed</span>
        </div>
        <a href="quiz.html" onclick="markQuizAsVisited()" class="cyber-btn">
          <span>ğŸš€ ENGAGE MISSION</span>
          <div class="btn-glow"></div>
        </a>
      </div>
      
      <div class="mission-card leaderboard cyber-card">
        <div class="card-glow"></div>
        <div class="card-header">
          <span class="mission-icon">ğŸ‘‘</span>
          <div class="rank-indicator">
            <span class="rank-text">#1</span>
          </div>
        </div>
        <h3>Arena Rankings</h3>
        <p>Battle for supremacy and claim your place among the elite warriors in the global cyber arena.</p>
        <div class="card-stats">
          <span class="stat">âš”ï¸ 142 Active Warriors</span>
          <span class="stat">ğŸ”¥ Live Battle Mode</span>
        </div>
        <div class="live-status">
          <div class="live-dot"></div>
          <span class="live-text">ARENA IS LIVE</span>
        </div>
        <a href="leaderboard.html" class="cyber-btn">
          <span>âš”ï¸ ENTER ARENA</span>
          <div class="btn-glow"></div>
        </a>
      </div>
      
      <div class="mission-card achievement cyber-card">
        <div class="card-glow"></div>
        <div class="card-header">
          <span class="mission-icon">ğŸ†</span>
          <div class="achievement-counter">
            <span class="counter">7/20</span>
          </div>
        </div>
        <h3>Battle Honors</h3>
        <p>Unlock legendary achievements and showcase your warrior prowess. Collect rare badges and titles.</p>
        <div class="card-stats">
          <span class="stat">ğŸ–ï¸ 7 Achievements</span>
          <span class="stat">â­ 3 Rare Badges</span>
        </div>
        <div class="achievement-preview">
          <div class="mini-badge">ğŸ¥‡</div>
          <div class="mini-badge">ğŸ…</div>
          <div class="mini-badge">â­</div>
          <span class="more-indicator">+4</span>
        </div>
        <a href="achievement.html" class="cyber-btn">
          <span>ğŸ† VIEW HONORS</span>
          <div class="btn-glow"></div>
        </a>
      </div>
    </div>
    </div>
    </div>
  </div>

  <!-- Sidebar Toggle Button -->
  <button class="sidebar-toggle" id="sidebar-toggle">
    <span id="toggle-icon">ğŸ‘¥</span>
  </button>

  <!-- Right Sidebar - Players List -->
  <div class="right-sidebar" id="right-sidebar">
    <div class="sidebar-header">
      <h3>ğŸŒ Warriors Online</h3>
      <div class="online-count">
        <span class="online-dot"></span>
        <span id="online-count-text">0 online</span>
      </div>
    </div>
    
    <!-- Search Box untuk Follow Warriors -->
    <div class="search-warriors-container">
      <div class="search-input-wrapper">
        <input type="text" id="search-warriors" placeholder="ğŸ” Search warriors to follow..." autocomplete="off">
        <button type="button" id="search-warriors-btn" class="search-warriors-button">
          <span class="search-icon">ğŸ”</span>
        </button>
      </div>
      <div class="search-results" id="search-results" style="display: none;">
        <!-- Search results akan appear here -->
      </div>
    </div>
    
    <div class="players-list" id="players-list">
      <!-- Players will be populated dynamically -->
      <div class="loading-players">
        <div class="loading-spinner"></div>
        <span>Loading warriors...</span>
      </div>
    </div>
    
    <div class="sidebar-footer">
      <button class="refresh-btn" id="refresh-players">
        <span class="refresh-icon">ğŸ”„</span>
        <span>Refresh</span>
      </button>
    </div>
    </div>
  </div>

  <!-- ğŸ”” Mission / Notification Alert -->
  <div id="mission-alert" class="mission-alert hidden">
    <span id="mission-icon">ğŸ¯</span>
    <span id="mission-text">New mission available!</span>
    <button id="mission-close">âœ–</button>
  </div>

  <!-- Modal Edit Name -->
  <div id="modal-edit-name" class="modal" style="display:none;">
    <div class="modal-content">
      <h3>âœï¸ Edit Warrior Name</h3>
      <input type="text" id="input-new-name" placeholder="Enter your warrior name" maxlength="20">
      <div class="modal-actions">
        <button id="save-name-btn" class="btn-action">ğŸ’¾ Save</button>
        <button id="cancel-name-btn" class="btn-action btn-cancel">âŒ Cancel</button>
      </div>
    </div>
  </div>

  <!-- Modal Change Avatar -->
  <div id="modal-change-avatar" class="modal" style="display:none;">
    <div class="modal-content">
      <h3>ğŸ–¼ï¸ Change Avatar</h3>
      <input type="text" id="input-avatar-url" placeholder="Paste image URL or leave empty for default">
      <div class="modal-actions">
        <button id="save-avatar-btn" class="btn-action">ğŸ’¾ Save</button>
        <button id="cancel-avatar-btn" class="btn-action btn-cancel">âŒ Cancel</button>
      </div>
    </div>
  </div>

  <!-- Link ke JS luaran -->
  <script type="module" src="js/home-user.js"></script>
</body>
</html>
